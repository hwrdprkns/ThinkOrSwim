# FibonacciRetracements
# DREWGRIFFITH15 (C) 2015

INPUT PERIODS = 90;
INPUT DISPLACE = -1;
INPUT AGGREGATIONPERIOD = AGGREGATIONPERIOD.DAY;
INPUT SHOWONLYLASTPERIOD = YES;

PLOT FR100;
IF SHOWONLYLASTPERIOD AND !ISNAN(High(PERIOD = AGGREGATIONPERIOD)[-1]) { FR100 = DOUBLE.NAN;
} ELSE { FR100 = HIGHEST(High(PERIOD = AGGREGATIONPERIOD)[-DISPLACE], PERIODS);
}

PLOT FR0;
IF SHOWONLYLASTPERIOD AND !ISNAN(Low(PERIOD = AGGREGATIONPERIOD)[-1]) { FR0 = DOUBLE.NAN;
} ELSE { FR0 = LOWEST(Low(PERIOD = AGGREGATIONPERIOD)[-DISPLACE], PERIODS);
}

PLOT FR38 = FR100 - (FR100 - FR0) * 0.382;
PLOT FR50 = FR100 - (FR100 - FR0) * 0.500;
PLOT FR62 = FR100 - (FR100 - FR0) * 0.618;
PLOT FR79 = FR100 - (FR100 - FR0) * 0.786;
PLOT FR24 = FR100 - (FR100 - FR0) * 0.236;

FR0.SETDEFAULTCOLOR(CREATECOLOR(255, 255, 255));
FR0.SETPAINTINGSTRATEGY(PaintingStrategy.DASHES);
FR24.SETDEFAULTCOLOR(CREATECOLOR(255, 255, 255));
FR24.SETPAINTINGSTRATEGY(PaintingStrategy.DASHES);
FR38.SETDEFAULTCOLOR(CREATECOLOR(255, 255, 255));
FR38.SETPAINTINGSTRATEGY(PaintingStrategy.DASHES);
FR50.SETDEFAULTCOLOR(CREATECOLOR(255, 255, 255));
FR50.SETPAINTINGSTRATEGY(PaintingStrategy.DASHES);
FR62.SETDEFAULTCOLOR(CREATECOLOR(255, 255, 255));
FR62.SETPAINTINGSTRATEGY(PaintingStrategy.DASHES);
FR79.SETDEFAULTCOLOR(CREATECOLOR(255, 255, 255));
FR79.SETPAINTINGSTRATEGY(PaintingStrategy.DASHES);
FR100.SETDEFAULTCOLOR(CREATECOLOR(255, 255, 255));
FR100.SETPAINTINGSTRATEGY(PaintingStrategy.DASHES);

##############################################
